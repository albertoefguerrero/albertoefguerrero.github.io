<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2020-12-16 mié 17:09 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Final Challenge</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="Alberto Flores" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: auto;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<link rel="stylesheet" type="text/css" href="https://fniessen.github.io/org-html-themes/src/readtheorg_theme/css/htmlize.css"/>
<link rel="stylesheet" type="text/css" href="https://fniessen.github.io/org-html-themes/src/readtheorg_theme/css/readtheorg.css"/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script type="text/javascript" src="https://fniessen.github.io/org-html-themes/src/lib/js/jquery.stickytableheaders.min.js"></script>
<script type="text/javascript" src="https://fniessen.github.io/org-html-themes/src/readtheorg_theme/js/readtheorg.js"></script>
<script type="text/javascript">
// @license magnet:?xt=urn:btih:e95b018ef3580986a04669f1b5879592219e2a7a&dn=public-domain.txt Public Domain
<!--/*--><![CDATA[/*><!--*/
     function CodeHighlightOn(elem, id)
     {
       var target = document.getElementById(id);
       if(null != target) {
         elem.classList.add("code-highlighted");
         target.classList.add("code-highlighted");
       }
     }
     function CodeHighlightOff(elem, id)
     {
       var target = document.getElementById(id);
       if(null != target) {
         elem.classList.remove("code-highlighted");
         target.classList.remove("code-highlighted");
       }
     }
    /*]]>*///-->
// @license-end
</script>
</head>
<body>
<div id="content">
<h1 class="title">Final Challenge</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org2a9282b">1. - Kanban</a></li>
<li><a href="#orgb273a32">2. - Architecture Diagram</a></li>
<li><a href="#orgc69f7b9">3. - Process Flow</a></li>
<li><a href="#org04cf4a1">4. - Repository</a></li>
<li><a href="#orgf212af8">5. Learn about go toolchain</a></li>
<li><a href="#org0663b14">6. Play with code from repository</a></li>
<li><a href="#org69ce4c1">7. Jenkins with Go</a></li>
<li><a href="#orgf003730">8. Installing and running Docker on CentOS 7</a></li>
<li><a href="#org16f4c72">9. Building Dockerfile and running</a></li>
<li><a href="#org54c6644">10. Fixed Dockerfile</a></li>
<li><a href="#orgffee3ce">11. Jenkins with BlueOcean</a>
<ul>
<li><a href="#org0e81f91">11.1. Installing with docker</a></li>
<li><a href="#org8015dbb">11.2. Webhook</a></li>
<li><a href="#org6a62ffb">11.3. Creating a Pipeline</a></li>
</ul>
</li>
<li><a href="#orgcc9e83c">12. DO NOT USE. Creating a custom Dockerfile with Jenkins, BlueOcean, Go and dependencies</a></li>
<li><a href="#org49da4b0">13. Custom Dockerfile with Jenkins BlueOcean and Docker</a>
<ul>
<li><a href="#orgc3cf4ae">13.1. Running Custom Docker image</a></li>
<li><a href="#org1d4f0dc">13.2. <span class="todo TODO">TODO</span> This will create a new Jenkins instance, we have to setup credentials again.</a></li>
<li><a href="#orgfc82ae3">13.3. <span class="todo TODO">TODO</span> Crate an image out of custom image with all credentials</a></li>
<li><a href="#org6de9248">13.4. <span class="todo TODO">TODO</span> jenkins with docker https://medium.com/@karthi.net/docker-tutorial-build-docker-images-using-jenkins-d2880e65b74</a></li>
<li><a href="#org93e248d">13.5. <span class="todo TODO">TODO</span> Integrating SonarQube and Jenkins https://aspiresoftware.in/blog/intergrating-sonarqube-and-jenkins/</a></li>
<li><a href="#org964b305">13.6. <span class="todo TODO">TODO</span> SonarScanner for Jenkins https://docs.sonarqube.org/latest/analysis/scan/sonarscanner-for-jenkins/</a></li>
<li><a href="#org1a79d34">13.7. <span class="todo TODO">TODO</span> Try Out SonarQube https://docs.sonarqube.org/latest/setup/get-started-2-minutes/</a></li>
<li><a href="#org2729138">13.8. <span class="todo TODO">TODO</span> Dockerhub - SonarQube https://hub.docker.com/_/sonarqube/</a></li>
<li><a href="#org6e42b10">13.9. <span class="todo TODO">TODO</span> SonarQube - Docker installation https://techexpert.tips/sonarqube/sonarqube-docker-installation/</a></li>
<li><a href="#org1ab628a">13.10. <span class="todo TODO">TODO</span> Prerequisites and Overview https://docs.sonarqube.org/latest/requirements/requirements/</a></li>
<li><a href="#org54b1655">13.11. <span class="todo TODO">TODO</span> Keep the app running</a></li>
<li><a href="#org3181dd9">13.12. <span class="todo TODO">TODO</span> Docker code in an external</a></li>
</ul>
</li>
<li><a href="#orgf7b15e5">14. Sonar Qube</a>
<ul>
<li><a href="#org6247ec6">14.1. Sonar Scanner</a></li>
</ul>
</li>
<li><a href="#org41451a1">15. - Notes</a></li>
</ul>
</div>
</div>
<div id="outline-container-org2a9282b" class="outline-2">
<h2 id="org2a9282b"><span class="section-number-2">1</span> - Kanban</h2>
<div class="outline-text-2" id="text-1">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">TODO</th>
<th scope="col" class="org-left">Doing</th>
<th scope="col" class="org-left">Done</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">Learn about Architecture Diagrams</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">Design Processes Diagram</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">Design Information Flow</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">Clone Repository</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">Install docker, git and go</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">Learn about Go toolchain</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">Play with code from repository</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">Run code and tests on docker</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">Fix Docker image</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">Docker: Jenkins and BlueOcean</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">Simple BlueOcean pipeline</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">Pipeline: Build step</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">Pipeline: Testing step</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">Custom docker image with Go</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">Jenkins Webhook</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">Learn about Sonar Qube</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">Install sonarqube</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">Integrate Sonar Qube</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">Jenkins and Docker Orchestration</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">Docker !!</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">Secure Jenkins</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">Fix the code</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-orgb273a32" class="outline-2">
<h2 id="orgb273a32"><span class="section-number-2">2</span> - Architecture Diagram</h2>
<div class="outline-text-2" id="text-2">
<p>
<a href="https://viewer.diagrams.net/?highlight=0000ff&amp;edit=_blank&amp;layers=1&amp;nav=1#R7Vrdc9o4EP9reISxJduYRxJCOze9Tq9pJ9enjLCF0SFbnC0K3F9%2FK1sGf4iYdIAmk%2FAA0kqW1ru%2F%2FZLo4dt4%2ByElq8WfIqS8h6xw28OTHkK%2B58K3IuwKguN5BSFKWViQ7APhnv1HNdHS1DULaVabKIXgkq3qxEAkCQ1kjUbSVGzq0%2BaC13ddkYi2CPcB4W3qAwvlQr%2BWax3oHymLFuXOtqVHYlJO1oRsQUKxqZDwXQ%2FfpkLIohVvbylXsivlUjw3PTK6ZyyliTzlAUlpPP0kPzP%2BfRcHLHjYsmVfr%2FKT8LV%2BYc2s3JUSSMU6CalaxOrhm82CSXq%2FIoEa3YDKgbaQMYeeDU29HE0l3R7l096%2FPaCGipjKdAdT9API0QLblUjQ%2Fc1B%2Fm4p1EVF9sjTRKJ1Hu3XPogFGloyz5AS7pZSSLLFXkhiLTlL6O0ek1ZdSoSzKIF2ACKhKRA4mVH%2BRWRMMlEbUJJkgMZPjQkzIaWIKxPGekkplEYAayvFWLyNlFUONnTGRSSyQcTkYj07g5aGdSWBRgZuS01Dt62lknZ2JTkGJXkcdr2ZC3inqra8f9eiHOhnuc8ZwwTbX20Pg9CK9G%2B%2ByqwkfGDyo5KhR2Il62SWrSrTgPdZ81GgFTyU5AZ4QA2yjpBMpmIJAOICUDBJREIVu4zzBqmFpCYeYhaGahuj4dZNW7FYLt9DGE2wC42z2LTtDZBbAwxGQwNgbH8Po5plX8qw3W7DLk1pzul2rAIKSIQmoW5OAk6yjAUmL0jDVmhpyAtiGUkjKrtcT1uuVV9ocIUlLaWcSPazzoZJinqHL4LlplK6Ytyw8lFjiUys04Dqp6qxp7GQ4zYXami0kENroVyp%2B9f%2BdT17p%2BuZxXlGUFWn2cd2uubcqd%2BQYBnldlYxrXn%2BgSn5ZuNsdYgSpOzM2VZZ5o3mZ7KQUqU8YyUbNA3CxBkwSHrmDCw4HQSwI5qGRBL4UfQMfnOX35%2BlJAkzBfUpAh85%2FYcmS5ZkfRv5g1USXdbwHdcZuE4jVIwMlu%2F5bRSXtLOb%2FbArVMwLN3kIBt9YDFkosj7TDXx%2FFTFJqpGiO7Yg56TY8kehnPdg8hSmPL%2BJKXM0cUxJ4qVCyegoploaPAayr1B1bMiuBixl0v0CS2lQm113CGoKpHdCRJySFcu0RwgymDKdk5hxJSrDDgVrD3S2EGJ5FGMmOL5I3J0jWfGbua3JYV0VXGU1%2FFQAMxYddRWAIWLbwWA8%2BKZWsPximdFSXEX5Cj%2B6nLdR2dfcGgPdSgV%2Fmt79hMWyEkGNOoZsMmcQLGiw5CyTj4HISnsyRdcq1C4f12zXNZVAhrg2vFRcs08o54%2BIuTiasJrA6LLmcxeuRhC3YNaEhZjPWUDB5SUBXYEbBK4uq37PsgcOaqgfm9Q%2FHFgGBPjoUgg44aji1WW6Vmemm4mAEd6PachIH9mWUya7xcBjPvBY66jk%2BDEUwZKm1VT4cpjBVuNcC%2FsGwIyGbbSUtPOjxZS0NNByvlq3KBafYEdXaZ01sW2ZBX2dohiP6nrEuBH1Ty6KGwedyL9uUYxOSCq6tE%2B3TP5daf%2FQxq3ak221s6slaNfFyxHDvA5eHA9SBTw6fLy61r19dvlcAOGRX18KuQPLtYcYj%2FBoiH3vunA6Ifk4FU7WyXAC0KS7PQJV50e1c3go7%2F1OEP7Wk7w3A0JkAOHrKcPvRUJS2O6v9Yy%2B1%2BJ5jEStOgt5razJv2Yxjkw59uvB2PeEKZa%2B0UwyyHnfUaYOePap%2BIsB2fHrzNcAskleWL2DSwVI6%2BWB6xn3nu%2BnBFc9JRjajeqyBEEHVpq14%2Fmw0nlZ9uy7rxflqcZpoLxAINcpfeI%2FHW%2F7yg01zjycNiiveh%2BC%2FC5QviSIlayxknCzKwxjzGegFQGtKaiNVq99mSFYvnEMojoGh20M2mcCIXQP%2F8ssStPDn1vx3f8%3D">Link to architecture diagram in Diagrams.net</a>
</p>


<div id="orgded312c" class="figure">
<p><img src="images/diagram.png" alt="diagram.png" />
</p>
</div>
</div>
</div>

<div id="outline-container-orgc69f7b9" class="outline-2">
<h2 id="orgc69f7b9"><span class="section-number-2">3</span> - Process Flow</h2>
<div class="outline-text-2" id="text-3">
<p>
<a href="https://viewer.diagrams.net/?highlight=0000ff&amp;edit=_blank&amp;layers=1&amp;nav=1&amp;title=Untitled%20Diagram.drawio#R3VjbctowEP0aHtvxBRvnsUAuL51Jhuk0eeoIe7HVyJZHloPJ13dly%2FgiUiidDJPwANpd7Uo6Z48MTNxFWt0KkiffeQRs4lhRNXGXE8cJfA%2FflWPXODwraByxoFHjsjvHir6CdlraW9IIisFEyTmTNB86Q55lEMqBjwjBt8NpG86Gq%2BYkBsOxCgkzvT9pJBN9LM%2Fq%2FHdA46Rd2bZ0JCXtZO0oEhLxbc%2FlXk%2FcheBcNqO0WgBT2LW4NHk3b0T3GxOQyVMSHir37ml24%2FxIlr%2Br11%2F266J4%2FKKrvBBW6gPrzcpdiwBWQbDRmG8TKmGVk1BFtkg3%2BhKZMrRsHJIibxjY0Apw0fmGMrbgjIu6kBsRCDYh%2Bgsp%2BDP0In4YwHqDEb0bEBKqN49p78HDpgOeghQ7nNImtATohrN9bW87%2Blr2kh5zrY%2Fohon3lTtMcaBh%2FQeI3RMgzqJvqlfRChkpChoOkW0SIDJa9SgoJx5aACOSvgzLH0JCr3DPKS7cYe6NMA%2BmX71hkYKXIgSd1%2B%2FScamro6UkETFIo1RNzv7o5%2FPlGXzdl3XWRvB04vgkVX2frYu8ZsZniOV8LXAUq9EtlUm5rjHNuRneYljxAuuE82ejEwQvs0iJZ2kdF9xl9DUmyPMMfdnOgV7z30tg%2FucXmGubqgjOE5h7QKujUu8ssJnB17yk%2BFjGDeR5p7ORcJrzYbgsaBbj55KHzyBQA2CK8sOpymDl4qoKPr%2BqpjNTCjPf6l7OeRLzDqj1b3XfWW9XBpPXFYSlhPprc6Q%2BSEbYrqBFDb16QI3VN5bYimcEg9ZDuYYPKDeDoYvLrd3QiCX1cwcKWd94Hw5lf6yvy6M8%2Ff9bDSoqH3vjJ8UAfkdtrGWlCamNXWtkuPvHvtHLUmaXVltt3qk3KB6geTwevQWau%2BZoI17sSg6GLeMEo1Y4%2BQ52R4XcUaGzL100ux%2FtzfTunw%2F3%2Bg8%3D">Link to process flow in Diagrams.net</a>
</p>


<div id="org60f26f7" class="figure">
<p><img src="images/process-flow.png" alt="process-flow.png" />
</p>
</div>
</div>
</div>

<div id="outline-container-org04cf4a1" class="outline-2">
<h2 id="org04cf4a1"><span class="section-number-2">4</span> - Repository</h2>
<div class="outline-text-2" id="text-4">
<p>
<a href="https://github.com/albertoefguerrero/DOTT">https://github.com/albertoefguerrero/DOTT</a>
</p>
</div>
</div>

<div id="outline-container-orgf212af8" class="outline-2">
<h2 id="orgf212af8"><span class="section-number-2">5</span> Learn about go toolchain</h2>
<div class="outline-text-2" id="text-5">
<ul class="org-ul">
<li>Setting up GO environment variables (should be done with root)</li>
</ul>

<div class="org-src-container">
<pre class="src src-shell"><span style="color: #af3a03;">export</span> <span style="color: #076678;">GOPATH</span>=~/go
<span style="color: #af3a03;">export</span> <span style="color: #076678;">GOBIN</span>=$<span style="color: #076678;">GOPATH</span>/bin
<span style="color: #af3a03;">export</span> <span style="color: #076678;">PATH</span>=$<span style="color: #076678;">PATH</span>:$<span style="color: #076678;">GOBIN</span>
</pre>
</div>
</div>
</div>


<div id="outline-container-org0663b14" class="outline-2">
<h2 id="org0663b14"><span class="section-number-2">6</span> Play with code from repository</h2>
<div class="outline-text-2" id="text-6">
<ul class="org-ul">
<li>Proper goop repository is <code>~github.com/karmakaze/goop</code>. Should change in Dockerfile</li>
</ul>
<div class="org-src-container">
<pre class="src src-shell">go get github.com/karmakaze/goop <span style="color: #a89984;"># </span><span style="color: #a89984;">should be run as root</span>
goop install
goop go run api.go convert.go
</pre>
</div>


<ul class="org-ul">
<li>Ash is the alpine shell</li>

<li>The port is defined in <code>main()</code> in line 66 of file api.go, this should be a variable, not hardcoded</li>
</ul>
<div class="org-src-container">
<pre class="src src-go">log.Fatal(http.ListenAndServe(":8000", router))
</pre>
</div>

<ul class="org-ul">
<li>Test are run like this</li>
</ul>
<div class="org-src-container">
<pre class="src src-shell">go get github.com/stretchr/testify/assert
goop go test
</pre>
</div>
</div>
</div>

<div id="outline-container-org69ce4c1" class="outline-2">
<h2 id="org69ce4c1"><span class="section-number-2">7</span> Jenkins with Go</h2>
<div class="outline-text-2" id="text-7">
<p>
<a href="https://plugins.jenkins.io/golang/">https://plugins.jenkins.io/golang/</a>
</p>
</div>
</div>

<div id="outline-container-orgf003730" class="outline-2">
<h2 id="orgf003730"><span class="section-number-2">8</span> Installing and running Docker on CentOS 7</h2>
<div class="outline-text-2" id="text-8">
<div class="org-src-container">
<pre class="src src-shell">sudo yum -y update
sudo yum install -y yum-utils
sudo yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo
sudo yum install docker-ce docker-ce-cli containerd.io
sudo systemctl start docker
<span style="color: #a89984;"># </span><span style="color: #a89984;">sudo docker run hello-world # only to test</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org16f4c72" class="outline-2">
<h2 id="org16f4c72"><span class="section-number-2">9</span> Building Dockerfile and running</h2>
<div class="outline-text-2" id="text-9">
<div class="org-src-container">
<pre class="src src-shell">docker build -t gom .
docker run -ti -p 8000:8000 gom
</pre>
</div>

<p>
exec commands
</p>
<pre class="example">
docker exec -it &lt;container&gt; &lt;command&gt;
</pre>
</div>
</div>

<div id="outline-container-org54c6644" class="outline-2">
<h2 id="org54c6644"><span class="section-number-2">10</span> Fixed Dockerfile</h2>
<div class="outline-text-2" id="text-10">
<p>
Testify required Go 1.13+ so using a newer image of golang
Mux required GCC so it was added too
</p>

<div class="org-src-container">
<pre class="src src-Dockerfile">FROM golang:1.15-alpine

ENV GOPATH=/go:/app
RUN apk add --update git
RUN apk add build-base
WORKDIR /app

COPY Goopfile Goopfile
RUN go get github.com/karmakaze/goop \
    &amp;&amp; go get github.com/gorilla/mux \
    &amp;&amp; go get github.com/stretchr/testify/assert \
    &amp;&amp; goop install

COPY . .
CMD ["ash", "-c", "goop go run api.go convert.go"]
# docker build -t gom .
# docker run -ti -p 8000:8000 gom
</pre>
</div>
</div>
</div>

<div id="outline-container-orgffee3ce" class="outline-2">
<h2 id="orgffee3ce"><span class="section-number-2">11</span> Jenkins with BlueOcean</h2>
<div class="outline-text-2" id="text-11">
<p>
It is really easy to create a Pipeline with Jenkins and BlueOcean
</p>
</div>

<div id="outline-container-org0e81f91" class="outline-3">
<h3 id="org0e81f91"><span class="section-number-3">11.1</span> Installing with docker</h3>
<div class="outline-text-3" id="text-11-1">
<p>
We can install BlueOcean and jenkins with Docker
</p>
<div class="org-src-container">
<pre class="src src-shell">docker run -p 8080:8080 jenkinsci/blueocean
</pre>
</div>

<p>
-The documentation for <a href="https://hub.docker.com/r/jenkinsci/blueocean">the blue ocean docker</a>
</p>
</div>
</div>

<div id="outline-container-org8015dbb" class="outline-3">
<h3 id="org8015dbb"><span class="section-number-3">11.2</span> Webhook</h3>
<div class="outline-text-3" id="text-11-2">
<ul class="org-ul">
<li><a href="https://dzone.com/articles/adding-a-github-webhook-in-your-jenkins-pipeline">Adding a GitHub Webhook in Your Jenkins Pipeline</a></li>
<li><a href="https://jayd.ml/jenkins/2019/03/05/jenkins-pipeline-webhooks.html">How to get Jenkins Blue Ocean Github Webhooks to Work</a></li>
<li><a href="https://medium.com/@joydeep56053/continuous-integration-using-jenkins-blueocean-github-ubuntu-robotframework-5b800ae1df8c">Continuous Integration using Jenkins BlueOcean + Github + Ubuntu &amp; Robot Framework</a></li>

<li><a href="https://plugins.jenkins.io/multibranch-scan-webhook-trigger/">Plugin for webhook</a></li>

<li>Example of URL with token named token-test</li>
</ul>
<pre class="example">
http://3.129.89.220:8081/multibranch-webhook-trigger/invoke?token=token-test
</pre>
</div>
</div>




<div id="outline-container-org6a62ffb" class="outline-3">
<h3 id="org6a62ffb"><span class="section-number-3">11.3</span> Creating a Pipeline</h3>
<div class="outline-text-3" id="text-11-3">
<ul class="org-ul">
<li><a href="https://www.jenkins.io/doc/book/blueocean/creating-pipelines/">Creating a Pipeline with BlueOcean</a></li>
<li><a href="https://www.jenkins.io/doc/book/blueocean/pipeline-editor/">BlueOcean Pipeline Editor</a></li>
<li><a href="https://docs.github.com/en/free-pro-team@latest/github/authenticating-to-github/creating-a-personal-access-token">Documentation to create a Github personal access token</a></li>
<li><a href="https://www.jenkins.io/doc/book/pipeline/syntax/">Jenkinsfile Pipeline syntax</a></li>
</ul>
</div>
</div>
</div>

<div id="outline-container-orgcc9e83c" class="outline-2">
<h2 id="orgcc9e83c"><span class="section-number-2">12</span> DO NOT USE. Creating a custom Dockerfile with Jenkins, BlueOcean, Go and dependencies</h2>
<div class="outline-text-2" id="text-12">
<div class="org-src-container">
<pre class="src src-Dockerfile">FROM jenkinsci/blueocean
USER root
RUN apk add --no-cache git make musl-dev go

# Configure Go
ENV GOROOT /usr/lib/go
ENV GOPATH /go
ENV PATH /go/bin:$PATH
ENV GOBIN $GOPATH/bin

RUN mkdir -p ${GOPATH}/src ${GOPATH}/bin

RUN go get github.com/karmakaze/goop \
    &amp;&amp; go get github.com/gorilla/mux \
    &amp;&amp; go get github.com/stretchr/testify/assert \
    &amp;&amp; go get github.com/pkg/errors
</pre>
</div>

<p>
With inspiration from <a href="https://stackoverflow.com/a/53405005">here</a> and <a href="https://fukubaka0825.medium.com/how-to-resolve-the-trouble-occurred-when-i-install-go-into-the-alpine-image-3c1e84f2315a">here</a> and <a href="https://stackoverflow.com/a/56613664">here</a>
</p>
</div>
</div>


<div id="outline-container-org49da4b0" class="outline-2">
<h2 id="org49da4b0"><span class="section-number-2">13</span> Custom Dockerfile with Jenkins BlueOcean and Docker</h2>
<div class="outline-text-2" id="text-13">
<div class="org-src-container">
<pre class="src src-Dockerfile">FROM jenkinsci/blueocean
USER root
RUN apk add --no-cache git make musl-dev
RUN apk add --update docker openrc
RUN rc-update add docker boot
RUN addgroup username docker
RUN apk add docker-compose
</pre>
</div>

<div class="org-src-container">
<pre class="src src-shell">docker run -it -v <span style="color: #79740e;">"/var/run/docker.sock:/var/run/docker.sock:rw"</span> image-name /bin/sh
</pre>
</div>

<p>
<a href="https://stackoverflow.com/questions/54099218/how-can-i-install-docker-inside-an-alpine-container">https://stackoverflow.com/questions/54099218/how-can-i-install-docker-inside-an-alpine-container</a>
<a href="https://wiki.alpinelinux.org/wiki/Docker#Installation">https://wiki.alpinelinux.org/wiki/Docker#Installation</a>
<a href="https://stackoverflow.com/questions/28302178/how-can-i-add-a-volume-to-an-existing-docker-container">https://stackoverflow.com/questions/28302178/how-can-i-add-a-volume-to-an-existing-docker-container</a>
</p>
</div>



<div id="outline-container-orgc3cf4ae" class="outline-3">
<h3 id="orgc3cf4ae"><span class="section-number-3">13.1</span> Running Custom Docker image</h3>
<div class="outline-text-3" id="text-13-1">
<ul class="org-ul">
<li>To create the image we do (Make sure the Dockerfile is in path)</li>
</ul>
<div class="org-src-container">
<pre class="src src-shell">docker build -t custom .
</pre>
</div>

<ul class="org-ul">
<li>To run the image we do</li>
</ul>
<div class="org-src-container">
<pre class="src src-shell">docker run -p 8000:8000 -p 8080:8080 custom
</pre>
</div>
</div>
</div>

<div id="outline-container-org1d4f0dc" class="outline-3">
<h3 id="org1d4f0dc"><span class="section-number-3">13.2</span> <span class="todo TODO">TODO</span> This will create a new Jenkins instance, we have to setup credentials again.</h3>
</div>
<div id="outline-container-orgfc82ae3" class="outline-3">
<h3 id="orgfc82ae3"><span class="section-number-3">13.3</span> <span class="todo TODO">TODO</span> Crate an image out of custom image with all credentials</h3>
</div>

<div id="outline-container-org6de9248" class="outline-3">
<h3 id="org6de9248"><span class="section-number-3">13.4</span> <span class="todo TODO">TODO</span> jenkins with docker <a href="https://medium.com/@karthi.net/docker-tutorial-build-docker-images-using-jenkins-d2880e65b74">https://medium.com/@karthi.net/docker-tutorial-build-docker-images-using-jenkins-d2880e65b74</a></h3>
</div>

<div id="outline-container-org93e248d" class="outline-3">
<h3 id="org93e248d"><span class="section-number-3">13.5</span> <span class="todo TODO">TODO</span> Integrating SonarQube and Jenkins <a href="https://aspiresoftware.in/blog/intergrating-sonarqube-and-jenkins/">https://aspiresoftware.in/blog/intergrating-sonarqube-and-jenkins/</a></h3>
</div>
<div id="outline-container-org964b305" class="outline-3">
<h3 id="org964b305"><span class="section-number-3">13.6</span> <span class="todo TODO">TODO</span> SonarScanner for Jenkins <a href="https://docs.sonarqube.org/latest/analysis/scan/sonarscanner-for-jenkins/">https://docs.sonarqube.org/latest/analysis/scan/sonarscanner-for-jenkins/</a></h3>
</div>
<div id="outline-container-org1a79d34" class="outline-3">
<h3 id="org1a79d34"><span class="section-number-3">13.7</span> <span class="todo TODO">TODO</span> Try Out SonarQube <a href="https://docs.sonarqube.org/latest/setup/get-started-2-minutes/">https://docs.sonarqube.org/latest/setup/get-started-2-minutes/</a></h3>
</div>
<div id="outline-container-org2729138" class="outline-3">
<h3 id="org2729138"><span class="section-number-3">13.8</span> <span class="todo TODO">TODO</span> Dockerhub - SonarQube <a href="https://hub.docker.com/_/sonarqube/">https://hub.docker.com/_/sonarqube/</a></h3>
</div>
<div id="outline-container-org6e42b10" class="outline-3">
<h3 id="org6e42b10"><span class="section-number-3">13.9</span> <span class="todo TODO">TODO</span> SonarQube - Docker installation <a href="https://techexpert.tips/sonarqube/sonarqube-docker-installation/">https://techexpert.tips/sonarqube/sonarqube-docker-installation/</a></h3>
</div>
<div id="outline-container-org1ab628a" class="outline-3">
<h3 id="org1ab628a"><span class="section-number-3">13.10</span> <span class="todo TODO">TODO</span> Prerequisites and Overview <a href="https://docs.sonarqube.org/latest/requirements/requirements/">https://docs.sonarqube.org/latest/requirements/requirements/</a></h3>
<div class="outline-text-3" id="text-13-10">
<p>
Hardware Requirements
A small-scale (individual or small team) instance of the SonarQube server requires at least 2GB of RAM to run efficiently and 1GB of free RAM for the OS. If you are installing an instance for a large teams or Enterprise, please consider the additional recommendations below.
The amount of disk space you need will depend on how much code you analyze with SonarQube.
SonarQube must be installed on hard drives that have excellent read &amp; write performance. Most importantly, the "data" folder houses the Elasticsearch indices on which a huge amount of I/O will be done when the server is up and running. Great read &amp; write hard drive performance will therefore have a great impact on the overall SonarQube server performance.
SonarQube does not support 32-bit systems on the server side. SonarQube does, however, support 32-bit systems on the scanner side.
</p>
</div>
</div>
<div id="outline-container-org54b1655" class="outline-3">
<h3 id="org54b1655"><span class="section-number-3">13.11</span> <span class="todo TODO">TODO</span> Keep the app running</h3>
</div>
<div id="outline-container-org3181dd9" class="outline-3">
<h3 id="org3181dd9"><span class="section-number-3">13.12</span> <span class="todo TODO">TODO</span> Docker code in an external</h3>
</div>
</div>

<div id="outline-container-orgf7b15e5" class="outline-2">
<h2 id="orgf7b15e5"><span class="section-number-2">14</span> Sonar Qube</h2>
<div class="outline-text-2" id="text-14">
<div class="org-src-container">
<pre class="src src-shell">docker run -d --name sonarqube <span style="color: #79740e;">\</span>
    -p 9000:9000 <span style="color: #79740e;">\</span>
    -e <span style="color: #076678;">SONAR_JDBC_URL</span>=... <span style="color: #79740e;">\</span>
    -e <span style="color: #076678;">SONAR_JDBC_USERNAME</span>=... <span style="color: #79740e;">\</span>
    -e <span style="color: #076678;">SONAR_JDBC_PASSWORD</span>=... <span style="color: #79740e;">\</span>
    -v sonarqube_data:/opt/sonarqube/data <span style="color: #79740e;">\</span>
    -v sonarqube_extensions:/opt/sonarqube/extensions <span style="color: #79740e;">\</span>
    -v sonarqube_logs:/opt/sonarqube/logs <span style="color: #79740e;">\</span>
    sonarqube
</pre>
</div>

<p>
docker run -d &#x2013;name sonarqube3 -p 9090:9000 -p 9092:9092 -v sonarqube-conf:/opt/sonarqube/conf -v sonarqube-data:/opt/sonarqube/data -v sonarqube-logs:/opt/sonarqube/logs -v sonarqube-extensions:/opt/sonarqube/extensions sonarqube
</p>
</div>

<div id="outline-container-org6247ec6" class="outline-3">
<h3 id="org6247ec6"><span class="section-number-3">14.1</span> Sonar Scanner</h3>
<div class="outline-text-3" id="text-14-1">
<div class="org-src-container">
<pre class="src src-shell">docker run --rm --network host <span style="color: #79740e;">\</span>
       -e <span style="color: #076678;">SONAR_HOST_URL</span>=<span style="color: #79740e;">"http://3.138.247.153/"</span> <span style="color: #79740e;">\</span>
       -e <span style="color: #076678;">SONAR_LOGIN</span>=<span style="color: #79740e;">"99a7536d3c88fc79e7f1dd189f99b4cf59926cc6"</span> <span style="color: #79740e;">\</span>
       -v <span style="color: #79740e;">"/var/jenkins_home/workspace/DOTT_master/cidr_convert_api/go/"</span> <span style="color: #79740e;">\</span>
       sonarsource/sonar-scanner-cli -X
</pre>
</div>
</div>
</div>
</div>





<div id="outline-container-org41451a1" class="outline-2">
<h2 id="org41451a1"><span class="section-number-2">15</span> - Notes</h2>
<div class="outline-text-2" id="text-15">
<ul class="org-ul">
<li><a href="https://www.redhat.com/architect/diagramming-tools-cloud-infrastructure">6 architectural diagramming tools for cloud infrastructure</a></li>
<li><a href="https://gitlab.com/redhatdemocentral/portfolio-architecture-examples">Portfolio Architecture Examples</a></li>
<li><a href="https://docs.microsoft.com/en-us/azure/devops/learn/agile/what-is-kanban">What is Kanban</a></li>
<li><a href="https://www.redhat.com/en/blog/integrating-ansible-jenkins-cicd-process">Integrating ansible with jenikns in a CI/CD process</a></li>
<li><a href="https://www.bantrain.com/how-to-setup-sonarqube-jenkins/">How to Setup Sonarqube &amp; Jenkins</a></li>

<li>jenkins and golang  <a href="https://plugins.jenkins.io/golang/">https://plugins.jenkins.io/golang/</a></li>
<li>goop <a href="https://github.com/karmakaze/goop">https://github.com/karmakaze/goop</a></li>
<li>goop error <a href="https://github.com/petejkim/goop/issues/44">https://github.com/petejkim/goop/issues/44</a></li>
<li>goop manual <a href="https://nicedoc.io/petejkim/goop">https://nicedoc.io/petejkim/goop</a></li>
<li>Go environment error <a href="https://stackoverflow.com/q/18149601">https://stackoverflow.com/q/18149601</a></li>
<li>Go environment variables  <a href="https://stackoverflow.com/a/49595197">https://stackoverflow.com/a/49595197</a></li>
<li>Go tests error <code>error during install strechr/testify, undefined: errors.Is</code>
<a href="https://github.com/stretchr/testify/issues/991">https://github.com/stretchr/testify/issues/991</a>
Fix with Go 1.13</li>
<li><a href="https://www.scalyr.com/blog/create-docker-image/">How To Create A Docker Image From A Container</a></li>
</ul>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="date">Date: 2020-12-12 sáb 00:00</p>
<p class="author">Author: Alberto Flores</p>
<p class="date">Created: 2020-12-16 mié 17:09</p>
<p class="validation"><a href="https://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
